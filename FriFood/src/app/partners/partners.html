<div class="container">
  <h2>Najdene ponudbe v tvoji bližini.</h2>

  @if (partners().length === 0) {
  <div class="empty-state">
    <p>Ni najdenih ponudb v bližini.</p>
  </div>
  } @else {
  <div class="row">
    @for (partner of partners(); track partner.id) {
    <div
      (click)="openPartner(partner)"
      data-bs-toggle="modal"
      data-bs-target="#partnerDashboardModal-partners"
    >
      <h3>
        {{ partner.name }}
      </h3>

      @if (distanceTo(partner) !== null) {
      <p>{{ distanceTo(partner) }}</p>
      }

      <p>{{ partner.address }}, {{ partner.city }}</p>

      <!-- PREVIEW: only top 2 -->
      <app-offers
        [limit]="2"
        [partner]="partner"
        (click)="openPartner(partner)"
        data-bs-toggle="modal"
        data-bs-target="#partnerDashboardModal-partners"
      ></app-offers>

      <button>Show all offers</button>

      <hr />
    </div>
    }
  </div>
  }
</div>
<app-partner-dashboard-modal
  [isOwnerPartner]="false"
  [partner]="partnerToOpen"
  [initiatingComponent]="'partners'"
></app-partner-dashboard-modal>
